import{j as a,r as g,R as O,l as Ot}from"./index-1.0.1-Bc4FHz3R.js";const C=({variant:e="text",width:t,height:r,count:n=1,className:i=""})=>{const o={width:typeof t=="number"?`${t}px`:t,height:typeof r=="number"?`${r}px`:r},u=s=>a.jsx("div",{className:`skeleton skeleton-${e} ${i}`,style:o,"aria-label":"Loading content",role:"status"},s);return n===1?u(0):a.jsx(a.Fragment,{children:Array.from({length:n}).map((s,p)=>u(p))})},kt=()=>a.jsxs("div",{className:"skeleton-image-card",children:[a.jsx(C,{variant:"rectangular",width:"100%",height:"200px"}),a.jsxs("div",{className:"skeleton-image-card-text",children:[a.jsx(C,{variant:"text",width:"90%"}),a.jsx(C,{variant:"text",width:"60%"})]})]}),Ct=()=>a.jsxs("div",{className:"skeleton-batch-item",children:[a.jsx(C,{variant:"rectangular",width:"80px",height:"80px"}),a.jsxs("div",{className:"skeleton-batch-item-content",children:[a.jsx(C,{variant:"text",width:"200px"}),a.jsx(C,{variant:"text",width:"150px"}),a.jsx(C,{variant:"text",width:"100px"})]})]}),Pt=({batches:e,onSelectBatch:t,loading:r=!1})=>r?a.jsxs("div",{className:"batch-list",children:[a.jsx("h3",{children:"Generated Sets"}),a.jsx("div",{className:"batch-items",children:Array.from({length:4}).map((n,i)=>a.jsx(Ct,{},i))})]}):!e||e.length===0?a.jsxs("div",{className:"batch-list",children:[a.jsx("h3",{children:"Generated Sets"}),a.jsx("p",{className:"no-batches",children:'No sets generated yet. Use "Generate Set" to create your first batch!'})]}):a.jsxs("div",{className:"batch-list",children:[a.jsx("h3",{children:"Generated Sets"}),a.jsx("div",{className:"batch-items",children:e.map(n=>a.jsxs("div",{className:"batch-item",onClick:()=>t(n.batch_id),children:[a.jsxs("div",{className:"batch-item-header",children:[a.jsx("h4",{children:n.batch_id}),a.jsxs("span",{className:"batch-count",children:[n.image_count," images"]})]}),a.jsxs("p",{className:"batch-date",children:["Created: ",new Date(n.created).toLocaleString()]})]},n.batch_id))})]});function _t(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B.apply(null,arguments)}var re="data-focus-lock",Me="data-focus-lock-disabled",Tt="data-no-focus-lock",At="data-autofocus-inside",Lt="data-no-autofocus";function J(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Mt(e,t){var r=g.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var Dt=typeof window<"u"?g.useLayoutEffect:g.useEffect,Oe=new WeakMap;function Rt(e,t){var r=Mt(null,function(n){return e.forEach(function(i){return J(i,n)})});return Dt(function(){var n=Oe.get(r);if(n){var i=new Set(n),o=new Set(e),u=r.current;i.forEach(function(s){o.has(s)||J(s,null)}),o.forEach(function(s){i.has(s)||J(s,u)})}Oe.set(r,e)},[e]),r}var X={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},ne=function(){return ne=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ne.apply(this,arguments)};function De(e){return e}function Re(e,t){t===void 0&&(t=De);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var u=t(o,n);return r.push(u),function(){r=r.filter(function(s){return s!==u})}},assignSyncMedium:function(o){for(n=!0;r.length;){var u=r;r=[],u.forEach(o)}r={push:function(s){return o(s)},filter:function(){return r}}},assignMedium:function(o){n=!0;var u=[];if(r.length){var s=r;r=[],s.forEach(o),u=r}var p=function(){var m=u;u=[],m.forEach(o)},d=function(){return Promise.resolve().then(p)};d(),r={push:function(m){u.push(m),d()},filter:function(m){return u=u.filter(m),r}}}};return i}function se(e,t){return t===void 0&&(t=De),Re(e,t)}function Bt(e){e===void 0&&(e={});var t=Re(null);return t.options=ne({async:!0,ssr:!1},e),t}var Be=se({},function(e){var t=e.target,r=e.currentTarget;return{target:t,currentTarget:r}}),Ge=se(),Gt=se(),Wt=Bt({async:!0,ssr:typeof document<"u"}),Ut=g.createContext(void 0),$t=[],ce=g.forwardRef(function(t,r){var n,i=g.useState(),o=i[0],u=i[1],s=g.useRef(),p=g.useRef(!1),d=g.useRef(null),m=g.useState({}),v=m[1],l=t.children,b=t.disabled,h=b===void 0?!1:b,x=t.noFocusGuards,j=x===void 0?!1:x,N=t.persistentFocus,f=N===void 0?!1:N,c=t.crossFrame,y=c===void 0?!0:c,F=t.autoFocus,w=F===void 0?!0:F;t.allowTextSelection;var H=t.group,z=t.className,dt=t.whiteList,lt=t.hasPositiveIndices,Ne=t.shards,K=Ne===void 0?$t:Ne,Fe=t.as,ft=Fe===void 0?"div":Fe,Se=t.lockProps,vt=Se===void 0?{}:Se,mt=t.sideCar,we=t.returnFocus,V=we===void 0?!1:we,ht=t.focusOptions,Q=t.onActivation,Y=t.onDeactivation,pt=g.useState({}),gt=pt[0],xt=g.useCallback(function(I){var T=I.captureFocusRestore;if(!d.current){var A,k=(A=document)==null?void 0:A.activeElement;d.current=k,k!==document.body&&(d.current=T(k))}s.current&&Q&&Q(s.current),p.current=!0,v()},[Q]),bt=g.useCallback(function(){p.current=!1,Y&&Y(s.current),v()},[Y]),yt=g.useCallback(function(I){var T=d.current;if(T){var A=(typeof T=="function"?T():T)||document.body,k=typeof V=="function"?V(A):V;if(k){var Ie=typeof k=="object"?k:void 0;d.current=null,I?Promise.resolve().then(function(){return A.focus(Ie)}):A.focus(Ie)}}},[V]),jt=g.useCallback(function(I){p.current&&Be.useMedium(I)},[]),Nt=Ge.useMedium,Ft=g.useCallback(function(I){s.current!==I&&(s.current=I,u(I))},[]),St=B((n={},n[Me]=h&&"disabled",n[re]=H,n),vt),Ee=j!==!0,wt=Ee&&j!=="tail",Et=Rt([r,Ft]),It=g.useMemo(function(){return{observed:s,shards:K,enabled:!h,active:p.current}},[h,p.current,K,o]);return O.createElement(g.Fragment,null,Ee&&[O.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:h?-1:0,style:X}),lt?O.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:h?-1:1,style:X}):null],!h&&O.createElement(mt,{id:gt,sideCar:Wt,observed:o,disabled:h,persistentFocus:f,crossFrame:y,autoFocus:w,whiteList:dt,shards:K,onActivation:xt,onDeactivation:bt,returnFocus:yt,focusOptions:ht,noFocusGuards:j}),O.createElement(ft,B({ref:Et},St,{className:z,onBlur:Nt,onFocus:jt}),O.createElement(Ut.Provider,{value:It},l)),wt&&O.createElement("div",{"data-focus-guard":!0,tabIndex:h?-1:0,style:X}))});ce.propTypes={};function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ae(e,t)}function Ht(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ae(e,t)}function G(e){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(e)}function Vt(e,t){if(G(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(G(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qt(e){var t=Vt(e,"string");return G(t)=="symbol"?t:t+""}function zt(e,t,r){return(t=qt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kt(e,t){function r(n){return n.displayName||n.name||"Component"}return function(i){var o=[],u;function s(){u=e(o.map(function(d){return d.props})),t(u)}var p=(function(d){Ht(m,d);function m(){return d.apply(this,arguments)||this}m.peek=function(){return u};var v=m.prototype;return v.componentDidMount=function(){o.push(this),s()},v.componentDidUpdate=function(){s()},v.componentWillUnmount=function(){var b=o.indexOf(this);o.splice(b,1),s()},v.render=function(){return O.createElement(i,this.props)},m})(g.PureComponent);return zt(p,"displayName","SideEffect("+r(i)+")"),p}}var E=function(e){for(var t=Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t},_=function(e){return Array.isArray(e)?e:[e]},We=function(e){return Array.isArray(e)?e[0]:e},Qt=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},Ue=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},$e=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},Yt=function(e){return e.hasAttribute("inert")},Jt=function(e,t){return!e||$e(e)||!Qt(e)&&!Yt(e)&&t(Ue(e))},He=function(e,t){var r=e.get(t);if(r!==void 0)return r;var n=Jt(t,He.bind(void 0,e));return e.set(t,n),n},Xt=function(e,t){return e&&!$e(e)?tr(e)?t(Ue(e)):!1:!0},Ve=function(e,t){var r=e.get(t);if(r!==void 0)return r;var n=Xt(t,Ve.bind(void 0,e));return e.set(t,n),n},qe=function(e){return e.dataset},Zt=function(e){return e.tagName==="BUTTON"},ze=function(e){return e.tagName==="INPUT"},Ke=function(e){return ze(e)&&e.type==="radio"},er=function(e){return!((ze(e)||Zt(e))&&(e.type==="hidden"||e.disabled))},tr=function(e){var t=e.getAttribute(Lt);return![!0,"true",""].includes(t)},de=function(e){var t;return!!(e&&(!((t=qe(e))===null||t===void 0)&&t.focusGuard))},ie=function(e){return!de(e)},rr=function(e){return!!e},nr=function(e,t){var r=Math.max(0,e.tabIndex),n=Math.max(0,t.tabIndex),i=r-n,o=e.index-t.index;if(i){if(!r)return 1;if(!n)return-1}return i||o},ar=function(e){return e.tabIndex<0&&!e.hasAttribute("tabindex")?0:e.tabIndex},le=function(e,t,r){return E(e).map(function(n,i){var o=ar(n);return{node:n,index:i,tabIndex:r&&o===-1?(n.dataset||{}).focusGuard?0:-1:o}}).filter(function(n){return!t||n.tabIndex>=0}).sort(nr)},ir=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],fe=ir.join(","),or="".concat(fe,", [data-focus-guard]"),Qe=function(e,t){return E((e.shadowRoot||e).children).reduce(function(r,n){return r.concat(n.matches(t?or:fe)?[n]:[],Qe(n))},[])},ur=function(e,t){var r;return e instanceof HTMLIFrameElement&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?D([e.contentDocument.body],t):[e]},D=function(e,t){return e.reduce(function(r,n){var i,o=Qe(n,t),u=(i=[]).concat.apply(i,o.map(function(s){return ur(s,t)}));return r.concat(u,n.parentNode?E(n.parentNode.querySelectorAll(fe)).filter(function(s){return s===n}):[])},[])},sr=function(e){var t=e.querySelectorAll("[".concat(At,"]"));return E(t).map(function(r){return D([r])}).reduce(function(r,n){return r.concat(n)},[])},ve=function(e,t){return E(e).filter(function(r){return He(t,r)}).filter(function(r){return er(r)})},ke=function(e,t){return t===void 0&&(t=new Map),E(e).filter(function(r){return Ve(t,r)})},me=function(e,t,r){return le(ve(D(e,r),t),!0,r)},W=function(e,t){return le(ve(D(e),t),!1)},cr=function(e,t){return ve(sr(e),t)},P=function(e,t){return e.shadowRoot?P(e.shadowRoot,t):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,t)?!0:E(e.children).some(function(r){var n;if(r instanceof HTMLIFrameElement){var i=(n=r.contentDocument)===null||n===void 0?void 0:n.body;return i?P(i,t):!1}return P(r,t)})},dr=function(e){for(var t=new Set,r=e.length,n=0;n<r;n+=1)for(var i=n+1;i<r;i+=1){var o=e[n].compareDocumentPosition(e[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(n)}return e.filter(function(u,s){return!t.has(s)})},Ye=function(e){return e.parentNode?Ye(e.parentNode):e},he=function(e){var t=_(e);return t.filter(Boolean).reduce(function(r,n){var i=n.getAttribute(re);return r.push.apply(r,i?dr(E(Ye(n).querySelectorAll("[".concat(re,'="').concat(i,'"]:not([').concat(Me,'="disabled"])')))):[n]),r},[])},lr=function(e){try{return e()}catch{return}},U=function(e){if(e===void 0&&(e=document),!(!e||!e.activeElement)){var t=e.activeElement;return t.shadowRoot?U(t.shadowRoot):t instanceof HTMLIFrameElement&&lr(function(){return t.contentWindow.document})?U(t.contentWindow.document):t}},fr=function(e,t){return e===t},vr=function(e,t){return!!E(e.querySelectorAll("iframe")).some(function(r){return fr(r,t)})},Je=function(e,t){return t===void 0&&(t=U(We(e).ownerDocument)),!t||t.dataset&&t.dataset.focusGuard?!1:he(e).some(function(r){return P(r,t)||vr(r,t)})},mr=function(e){e===void 0&&(e=document);var t=U(e);return t?E(e.querySelectorAll("[".concat(Tt,"]"))).some(function(r){return P(r,t)}):!1},hr=function(e,t){return t.filter(Ke).filter(function(r){return r.name===e.name}).filter(function(r){return r.checked})[0]||e},pe=function(e,t){return Ke(e)&&e.name?hr(e,t):e},pr=function(e){var t=new Set;return e.forEach(function(r){return t.add(pe(r,e))}),e.filter(function(r){return t.has(r)})},Ce=function(e){return e[0]&&e.length>1?pe(e[0],e):e[0]},Pe=function(e,t){return e.indexOf(pe(t,e))},oe="NEW_FOCUS",gr=function(e,t,r,n,i){var o=e.length,u=e[0],s=e[o-1],p=de(n);if(!(n&&e.indexOf(n)>=0)){var d=n!==void 0?r.indexOf(n):-1,m=i?r.indexOf(i):d,v=i?e.indexOf(i):-1;if(d===-1)return v!==-1?v:oe;if(v===-1)return oe;var l=d-m,b=r.indexOf(u),h=r.indexOf(s),x=pr(r),j=n!==void 0?x.indexOf(n):-1,N=i?x.indexOf(i):j,f=x.filter(function(z){return z.tabIndex>=0}),c=n!==void 0?f.indexOf(n):-1,y=i?f.indexOf(i):c,F=c>=0&&y>=0?y-c:N-j;if(!l&&v>=0||t.length===0)return v;var w=Pe(e,t[0]),H=Pe(e,t[t.length-1]);if(d<=b&&p&&Math.abs(l)>1)return H;if(d>=h&&p&&Math.abs(l)>1)return w;if(l&&Math.abs(F)>1)return v;if(d<=b)return H;if(d>h)return w;if(l)return Math.abs(l)>1?v:(o+v+l)%o}},xr=function(e){return function(t){var r,n=(r=qe(t))===null||r===void 0?void 0:r.autofocus;return t.autofocus||n!==void 0&&n!=="false"||e.indexOf(t)>=0}},_e=function(e,t,r){var n=e.map(function(o){var u=o.node;return u}),i=ke(n.filter(xr(r)));return i&&i.length?Ce(i):Ce(ke(t))},ue=function(e,t){return t===void 0&&(t=[]),t.push(e),e.parentNode&&ue(e.parentNode.host||e.parentNode,t),t},Z=function(e,t){for(var r=ue(e),n=ue(t),i=0;i<r.length;i+=1){var o=r[i];if(n.indexOf(o)>=0)return o}return!1},Xe=function(e,t,r){var n=_(e),i=_(t),o=n[0],u=!1;return i.filter(Boolean).forEach(function(s){u=Z(u||s,s)||u,r.filter(Boolean).forEach(function(p){var d=Z(o,p);d&&(!u||P(d,u)?u=d:u=Z(d,u))})}),u},Te=function(e,t){return e.reduce(function(r,n){return r.concat(cr(n,t))},[])},br=function(e,t){var r=new Map;return t.forEach(function(n){return r.set(n.node,n)}),e.map(function(n){return r.get(n)}).filter(rr)},yr=function(e,t){var r=U(_(e).length>0?document:We(e).ownerDocument),n=he(e).filter(ie),i=Xe(r||e,e,n),o=new Map,u=W(n,o),s=u.filter(function(h){var x=h.node;return ie(x)});if(s[0]){var p=W([i],o).map(function(h){var x=h.node;return x}),d=br(p,s),m=d.map(function(h){var x=h.node;return x}),v=d.filter(function(h){var x=h.tabIndex;return x>=0}).map(function(h){var x=h.node;return x}),l=gr(m,v,p,r,t);if(l===oe){var b=_e(u,v,Te(n,o))||_e(u,m,Te(n,o));if(b)return{node:b};console.warn("focus-lock: cannot find any node to move focus into");return}return l===void 0?l:d[l]}},jr=function(e){var t=he(e).filter(ie),r=Xe(e,e,t),n=le(D([r],!0),!0,!0),i=D(t,!1);return n.map(function(o){var u=o.node,s=o.index;return{node:u,index:s,lockItem:i.indexOf(u)>=0,guard:de(u)}})},ge=function(e,t){e&&("focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus())},ee=0,te=!1,Ze=function(e,t,r){r===void 0&&(r={});var n=yr(e,t);if(!te&&n){if(ee>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),te=!0,setTimeout(function(){te=!1},1);return}ee++,ge(n.node,r.focusOptions),ee--}};function R(e){if(!e)return null;if(typeof WeakRef>"u")return function(){return e||null};var t=e?new WeakRef(e):null;return function(){return(t==null?void 0:t.deref())||null}}var Nr=function(e){if(!e)return null;for(var t=[],r=e;r&&r!==document.body;)t.push({current:R(r),parent:R(r.parentElement),left:R(r.previousElementSibling),right:R(r.nextElementSibling)}),r=r.parentElement;return{element:R(e),stack:t,ownerDocument:e.ownerDocument}},Fr=function(e){var t,r,n,i,o;if(e)for(var u=e.stack,s=e.ownerDocument,p=new Map,d=0,m=u;d<m.length;d++){var v=m[d],l=(t=v.parent)===null||t===void 0?void 0:t.call(v);if(l&&s.contains(l)){for(var b=(r=v.left)===null||r===void 0?void 0:r.call(v),h=v.current(),x=l.contains(h)?h:void 0,j=(n=v.right)===null||n===void 0?void 0:n.call(v),N=me([l],p),f=(o=(i=x??(b==null?void 0:b.nextElementSibling))!==null&&i!==void 0?i:j)!==null&&o!==void 0?o:b;f;){for(var c=0,y=N;c<y.length;c++){var F=y[c];if(f!=null&&f.contains(F.node))return F.node}f=f.nextElementSibling}if(N.length)return N[0].node}}},et=function(e){var t=Nr(e);return function(){return Fr(t)}},Sr=function(e,t,r){if(!e||!t)return console.error("no element or scope given"),{};var n=_(t);if(n.every(function(u){return!P(u,e)}))return console.error("Active element is not contained in the scope"),{};var i=r?me(n,new Map):W(n,new Map),o=i.findIndex(function(u){var s=u.node;return s===e});if(o!==-1)return{prev:i[o-1],next:i[o+1],first:i[0],last:i[i.length-1]}},wr=function(e,t){var r=t?me(_(e),new Map):W(_(e),new Map);return{first:r[0],last:r[r.length-1]}},Er=function(e){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},e)},tt=function(e,t,r){t===void 0&&(t={});var n=Er(t),i=Sr(e,n.scope,n.onlyTabbable);if(i){var o=r(i,n.cycle);o&&ge(o.node,n.focusOptions)}},Ir=function(e,t){t===void 0&&(t={}),tt(e,t,function(r,n){var i=r.next,o=r.first;return i||n&&o})},Or=function(e,t){t===void 0&&(t={}),tt(e,t,function(r,n){var i=r.prev,o=r.last;return i||n&&o})},rt=function(e,t,r){var n,i=wr(e,(n=t.onlyTabbable)!==null&&n!==void 0?n:!0),o=i[r];o&&ge(o.node,t.focusOptions)},kr=function(e,t){t===void 0&&(t={}),rt(e,t,"first")},Cr=function(e,t){t===void 0&&(t={}),rt(e,t,"last")};function xe(e){setTimeout(e,1)}var Pr=function(t){return t&&"current"in t?t.current:t},nt=function(){return document&&document.activeElement===document.body},_r=function(){return nt()||mr()},L=null,S=null,Ae=function(){return null},M=null,$=!1,be=!1,Tr=function(){return!0},Ar=function(t){return(L.whiteList||Tr)(t)},Lr=function(t,r){M={observerNode:t,portaledElement:r}},Mr=function(t){return M&&M.portaledElement===t};function Le(e,t,r,n){var i=null,o=e;do{var u=n[o];if(u.guard)u.node.dataset.focusAutoGuard&&(i=u);else if(u.lockItem){if(o!==e)return;i=null}else break}while((o+=r)!==t);i&&(i.node.tabIndex=0)}var Dr=function(t){return t?!!$:$==="meanwhile"},Rr=function e(t,r,n){return r&&(r.host===t&&(!r.activeElement||n.contains(r.activeElement))||r.parentNode&&e(t,r.parentNode,n))},Br=function(t,r){return r.some(function(n){return Rr(t,n,n)})},at=function(t){return W(t,new Map)},Gr=function(t){return!at([t.parentNode]).some(function(r){return r.node===t})},q=function(){var t=!1;if(L){var r=L,n=r.observed,i=r.persistentFocus,o=r.autoFocus,u=r.shards,s=r.crossFrame,p=r.focusOptions,d=r.noFocusGuards,m=n||M&&M.portaledElement;if(nt()&&S&&S!==document.body&&(!document.body.contains(S)||Gr(S))){var v=Ae();v&&v.focus()}var l=document&&document.activeElement;if(m){var b=[m].concat(u.map(Pr).filter(Boolean)),h=function(){if(!Dr(s)||!d||!S||be)return!1;var c=at(b),y=c.findIndex(function(F){var w=F.node;return w===S});return y===0||y===c.length-1};if((!l||Ar(l))&&(i||h()||!_r()||!S&&o)&&(m&&!(Je(b)||l&&Br(l,b)||Mr(l))&&(document&&!S&&l&&!o?(l.blur&&l.blur(),document.body.focus()):(t=Ze(b,S,{focusOptions:p}),M={})),S=document&&document.activeElement,S!==document.body&&(Ae=et(S)),$=!1),document&&l!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var x=document&&document.activeElement,j=jr(b),N=j.map(function(f){var c=f.node;return c}).indexOf(x);N>-1&&(j.filter(function(f){var c=f.guard,y=f.node;return c&&y.dataset.focusAutoGuard}).forEach(function(f){var c=f.node;return c.removeAttribute("tabIndex")}),Le(N,j.length,1,j),Le(N,-1,-1,j))}}}return t},it=function(t){q()&&t&&(t.stopPropagation(),t.preventDefault())},ye=function(){return xe(q)},Wr=function(t){var r=t.target,n=t.currentTarget;n.contains(r)||Lr(n,r)},Ur=function(){return null},ot=function(){be=!0},ut=function(){be=!1,$="just",xe(function(){$="meanwhile"})},$r=function(){document.addEventListener("focusin",it),document.addEventListener("focusout",ye),window.addEventListener("focus",ot),window.addEventListener("blur",ut)},Hr=function(){document.removeEventListener("focusin",it),document.removeEventListener("focusout",ye),window.removeEventListener("focus",ot),window.removeEventListener("blur",ut)};function Vr(e){return e.filter(function(t){var r=t.disabled;return!r})}var st={moveFocusInside:Ze,focusInside:Je,focusNextElement:Ir,focusPrevElement:Or,focusFirstElement:kr,focusLastElement:Cr,captureFocusRestore:et};function qr(e){var t=e.slice(-1)[0];t&&!L&&$r();var r=L,n=r&&t&&t.id===r.id;L=t,r&&!n&&(r.onDeactivation(),e.filter(function(i){var o=i.id;return o===r.id}).length||r.returnFocus(!t)),t?(S=null,(!n||r.observed!==t.observed)&&t.onActivation(st),q(),xe(q)):(Hr(),S=null)}Be.assignSyncMedium(Wr);Ge.assignMedium(ye);Gt.assignMedium(function(e){return e(st)});const zr=Kt(Vr,qr)(Ur);var je=g.forwardRef(function(t,r){return O.createElement(ce,B({sideCar:zr,ref:r},t))}),ct=ce.propTypes||{};ct.sideCar;_t(ct,["sideCar"]);je.propTypes={};const Kr=({batchId:e,onBack:t})=>{var v,l,b,h,x,j,N,f;const[r,n]=g.useState(null),[i,o]=g.useState(!0),[u,s]=g.useState(null),p=g.useCallback(async()=>{o(!0);try{const y=await(await fetch(`/api/batches/${e}`)).json();n(y)}catch(c){Ot.error("Failed to fetch batch:",c)}finally{o(!1)}},[e]);g.useEffect(()=>{p()},[p]);const d=c=>{s(c)},m=()=>{s(null)};return g.useEffect(()=>{if(!u)return;const c=y=>{y.key==="Escape"&&m()};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[u]),i?a.jsx("div",{className:"batch-gallery",children:a.jsxs("div",{className:"loading-indicator",role:"status","aria-live":"polite","aria-atomic":"true",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Loading batch..."})]})}):r?a.jsxs("div",{className:"batch-gallery",children:[a.jsxs("div",{className:"batch-header",children:[a.jsx("button",{onClick:t,className:"back-button",children:"‚Üê Back to Gallery"}),a.jsx("h2",{children:r.batch_id}),a.jsxs("p",{className:"batch-info",children:[r.image_count," images"]})]}),a.jsx("div",{className:"image-grid",children:r.images&&r.images.length>0?r.images.map((c,y)=>{var F,w;return a.jsxs("div",{className:"image-card",onClick:()=>d(c),children:[a.jsx("img",{src:`/api/outputs/${c.relative_path}`,alt:((F=c.metadata)==null?void 0:F.prompt)||"Generated image",loading:"lazy"}),a.jsxs("div",{className:"image-info",children:[a.jsx("p",{className:"image-prompt",children:((w=c.metadata)==null?void 0:w.prompt)||"No prompt"}),c.metadata&&a.jsxs("div",{className:"image-metadata",children:[a.jsxs("span",{children:["Steps: ",c.metadata.steps]}),c.metadata.seed&&a.jsxs("span",{children:["Seed: ",c.metadata.seed]})]})]})]},y)}):a.jsx("p",{children:"No images in this batch yet"})}),u&&a.jsx("div",{className:"modal",onClick:m,children:a.jsx(je,{returnFocus:!0,children:a.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[a.jsx("button",{className:"modal-close",onClick:m,"aria-label":"Close modal",children:"√ó"}),a.jsx("img",{src:`/api/outputs/${u.relative_path}`,alt:((v=u.metadata)==null?void 0:v.prompt)||"Generated image"}),a.jsxs("div",{className:"modal-info",children:[a.jsx("h3",{children:"Image Details"}),((l=u.metadata)==null?void 0:l.prompt)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Prompt:"}),a.jsx("p",{children:u.metadata.prompt})]}),((b=u.metadata)==null?void 0:b.negative_prompt)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Negative Prompt:"}),a.jsx("p",{children:u.metadata.negative_prompt})]}),a.jsxs("div",{className:"detail-grid",children:[((h=u.metadata)==null?void 0:h.seed)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Seed:"})," ",u.metadata.seed]}),((x=u.metadata)==null?void 0:x.steps)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Steps:"})," ",u.metadata.steps]}),((j=u.metadata)==null?void 0:j.guidance_scale)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Guidance:"})," ",u.metadata.guidance_scale]}),((N=u.metadata)==null?void 0:N.width)&&((f=u.metadata)==null?void 0:f.height)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Size:"})," ",u.metadata.width,"x",u.metadata.height]})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Filename:"})," ",u.filename]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Created:"})," ",new Date(u.created).toLocaleString()]})]})]})})})]}):a.jsxs("div",{className:"batch-gallery",children:[a.jsx("button",{onClick:t,className:"back-button",children:"‚Üê Back to Gallery"}),a.jsx("p",{children:"Batch not found"})]})},Qr=({images:e,onRefresh:t,loading:r=!1})=>{var m,v,l,b,h,x,j,N;const[n,i]=g.useState(null),[o,u]=g.useState(!1),s=async()=>{u(!0);try{await t()}finally{u(!1)}},p=f=>{i(f)},d=()=>{i(null)};return g.useEffect(()=>{if(!n)return;const f=c=>{c.key==="Escape"&&d()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[n]),a.jsxs("div",{className:"image-grid-container",children:[a.jsxs("div",{className:"grid-header",children:[a.jsxs("h2",{children:["Generated Images (",r?"...":e.length,")"]}),a.jsx("button",{onClick:s,className:"refresh-btn",disabled:o||r,children:o?"Refreshing...":"Refresh"})]}),r?a.jsx("div",{className:"image-grid",children:Array.from({length:8}).map((f,c)=>a.jsx(kt,{},c))}):e.length===0?a.jsxs("div",{className:"no-images",children:[a.jsx("p",{children:"No images generated yet."}),a.jsx("p",{children:"Use the form above to create your first image!"})]}):a.jsx("div",{className:"image-grid",children:e.map(f=>{var c,y,F,w;return a.jsxs("div",{className:"image-card",onClick:()=>p(f),children:[a.jsx("img",{src:`/api/outputs/${f.filename}`,alt:((c=f.metadata)==null?void 0:c.prompt)||"Generated image"}),a.jsxs("div",{className:"image-overlay",children:[a.jsxs("p",{className:"image-prompt",children:[(F=(y=f.metadata)==null?void 0:y.prompt)==null?void 0:F.substring(0,60),(w=f.metadata)!=null&&w.prompt&&f.metadata.prompt.length>60?"...":""]}),f.created&&a.jsx("p",{className:"image-date",children:new Date(f.created).toLocaleDateString()})]})]},f.filename)})}),n&&a.jsx("div",{className:"modal",onClick:d,children:a.jsx(je,{returnFocus:!0,children:a.jsxs("div",{className:"modal-content",onClick:f=>f.stopPropagation(),children:[a.jsx("button",{className:"modal-close",onClick:d,"aria-label":"Close modal",children:"√ó"}),a.jsx("img",{src:`/api/outputs/${n.filename}`,alt:((m=n.metadata)==null?void 0:m.prompt)||"Generated image"}),a.jsxs("div",{className:"modal-info",children:[a.jsx("h3",{children:"Image Details"}),((v=n.metadata)==null?void 0:v.prompt)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Prompt:"}),a.jsx("p",{children:n.metadata.prompt})]}),((l=n.metadata)==null?void 0:l.negative_prompt)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Negative Prompt:"}),a.jsx("p",{children:n.metadata.negative_prompt})]}),a.jsxs("div",{className:"detail-grid",children:[((b=n.metadata)==null?void 0:b.seed)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Seed:"})," ",n.metadata.seed]}),((h=n.metadata)==null?void 0:h.steps)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Steps:"})," ",n.metadata.steps]}),((x=n.metadata)==null?void 0:x.guidance_scale)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Guidance:"})," ",n.metadata.guidance_scale]}),((j=n.metadata)==null?void 0:j.width)&&((N=n.metadata)==null?void 0:N.height)&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Size:"})," ",n.metadata.width,"x",n.metadata.height]})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Filename:"})," ",n.filename]}),n.created&&a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"Created:"})," ",new Date(n.created).toLocaleString()]})]})]})})})]})},Jr=({batches:e,images:t,onRefreshImages:r,onRefreshBatches:n,loadingImages:i=!1,loadingBatches:o=!1})=>{const[u,s]=g.useState(null),p=m=>{s(m)},d=()=>{s(null),n()};return a.jsx("div",{className:"gallery-tab",children:u?a.jsx(Kr,{batchId:u,onBack:d}):a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"gallery-section",children:[a.jsx("h2",{children:"üìÅ Batch Sets"}),a.jsx(Pt,{batches:e,onSelectBatch:p,loading:o})]}),a.jsxs("section",{className:"gallery-section",children:[a.jsx("h2",{children:"üñºÔ∏è Recent Images"}),a.jsx(Qr,{images:t,onRefresh:r,loading:i})]})]})})};export{Jr as default};
